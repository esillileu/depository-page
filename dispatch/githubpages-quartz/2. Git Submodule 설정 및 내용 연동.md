---
tags:
  - dispatch/depository
---
> 이전글 : [[1. Github Page 설정 및 Quartz 동작 확인]]
---
# 서담
- 컨텐츠인 옵시디언과 사이트 배포 툴을 분리하고자 함
- 옵시디언을 별개의 깃으로 업로드하고, 이를 [[Submodule]]로 연결하고자 함
	+ content 폴더를 서브모듈로 연결 
	+ 옵시디언은 서브모듈로 등록된 레포에 동기화 
	+ 서브모듈의 자세한 사용법은 [[Git Submodule 사용 방법]] 참고

# 본담
## 과정
### 1. 옵시디언 동기화용 [[Github Repository 생성 방법|레포 생성]] 및 편집
- [[Repsitory|레포]] 클론 
```bash
git clone https://github.com/<github_id>/<sub_repo_name>.git
cd <repo_name>
```
- [Quartz](https://github.com/jackyzha0/quartz) 표시를 위한 index.md 생성
	- 리눅스
	```bash
	echo "---\ntitle: hello world\n---\n# hello world" > index.md 
	```
	- 윈도우
	```powershell
	echo "---`ntitle: hello world`n---`n# hello world" > index.md
	```
- 커밋 및 동기화  
	```bash
	git add .
	git commit -m "add test commit"
	git push origin main
	```

### 2. 서브 모듈 추가 
+ [[1. Github Page 설정 및 Quartz 동작 확인|Github Page 설정 레포]]로 이동하여 진행
	```bash
	git submodule add [-b <branch_name>] <sub_repo_name> <submodule_path>
	git add .
	git commit -m "add submodule" 
	```

### 3. Quartz sync
```bash
npx quartz sync
```

# 종담
- [[Github]] [[Repsitory|레포]]에서 서브모듈로 지정한 디렉토리는 다르게 표시됨
	- 아이콘에 우측 화살표
	- 디렉토리 명이 파란색으로 표시됨
	- 이름 옆에 `@서브 모듈의 커밋 해시`가 표기됨 
- 서브모듈의 추가 자체는 어렵지 않으나, 모듈 사용법이 어려우니 개념을 확실하게 잡고 다음을 진행하는 편이 좋음
	- [[Git Submodule 사용 방법]] 참고


# 한담
- 서브모듈 다시 지정 시 오류
	- 서브모듈의 경우, 눈에 보이는 경로 이외에 `.\.git\modules\`에도 경로가 표시되고, 이것이 안지워지는 경우 해당 경로로 다시 서브모듈을 쓸 수 없다는 문제가 발생한다. 
	- 서브모듈을 지울때는 반드시 [[Git Submodule 사용 방법#삭제|삭제]]의 사항을 면밀히 확인해야함 
---
> 다음글 : [[3. 옵시디언 동기화 및 서브모듈 업데이트]]
